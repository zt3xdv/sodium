{
  "name": "Redis",
  "description": "Redis in-memory data store",
  "author": "Sodium",
  "docker_images": {
    "Redis 7": "redis:7-alpine",
    "Redis 6": "redis:6-alpine"
  },
  "startup": "redis-server --port {{SERVER_PORT}} --bind 0.0.0.0 --appendonly {{PERSISTENCE}} --maxmemory {{MAX_MEMORY}}mb",
  "config": {
    "files": {},
    "startup": {
      "done": "Ready to accept connections"
    },
    "stop": "shutdown"
  },
  "scripts": {
    "install": {
      "container": "redis:7-alpine",
      "entrypoint": "/bin/sh",
      "script": "#!/bin/sh\nmkdir -p /mnt/server/data"
    }
  },
  "variables": [
    {
      "name": "Port",
      "description": "Redis port",
      "env_variable": "SERVER_PORT",
      "default_value": "6379",
      "user_viewable": true,
      "user_editable": false,
      "rules": "required|integer"
    },
    {
      "name": "Max Memory (MB)",
      "description": "Maximum memory limit",
      "env_variable": "MAX_MEMORY",
      "default_value": "256",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|integer|min:64"
    },
    {
      "name": "Persistence",
      "description": "Enable AOF persistence",
      "env_variable": "PERSISTENCE",
      "default_value": "yes",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|in:yes,no"
    }
  ]
}
