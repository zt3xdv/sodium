{
  "name": "Valheim",
  "description": "Valheim dedicated server",
  "author": "Sodium",
  "docker_images": {
    "Steam Runtime": "cm2network/steamcmd:root"
  },
  "startup": "./valheim_server.x86_64 -name \"{{SERVER_NAME}}\" -port {{SERVER_PORT}} -world \"{{WORLD_NAME}}\" -password \"{{SERVER_PASSWORD}}\" -public {{PUBLIC}}",
  "config": {
    "files": {},
    "startup": {
      "done": "Game server connected"
    },
    "stop": "^C"
  },
  "scripts": {
    "install": {
      "container": "cm2network/steamcmd:root",
      "entrypoint": "/bin/bash",
      "script": "#!/bin/bash\ncd /mnt/server\n/home/steam/steamcmd/steamcmd.sh +force_install_dir /mnt/server +login anonymous +app_update 896660 validate +quit"
    }
  },
  "variables": [
    {
      "name": "Server Name",
      "description": "Name shown in server browser",
      "env_variable": "SERVER_NAME",
      "default_value": "Sodium Valheim",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:50"
    },
    {
      "name": "World Name",
      "description": "World save name",
      "env_variable": "WORLD_NAME",
      "default_value": "world",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:30"
    },
    {
      "name": "Server Password",
      "description": "Password to join (min 5 chars)",
      "env_variable": "SERVER_PASSWORD",
      "default_value": "changeme",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|min:5|max:30"
    },
    {
      "name": "Server Port",
      "description": "Server port",
      "env_variable": "SERVER_PORT",
      "default_value": "2456",
      "user_viewable": true,
      "user_editable": false,
      "rules": "required|integer"
    },
    {
      "name": "Public Server",
      "description": "Show in server browser (1=yes, 0=no)",
      "env_variable": "PUBLIC",
      "default_value": "1",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|in:0,1"
    }
  ]
}
