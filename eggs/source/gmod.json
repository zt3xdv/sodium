{
  "name": "Garry's Mod",
  "description": "Garry's Mod dedicated server",
  "author": "Sodium",
  "docker_images": {
    "Steam Runtime": "cm2network/steamcmd:root"
  },
  "startup": "./srcds_run -game garrysmod -port {{SERVER_PORT}} +maxplayers {{MAX_PLAYERS}} +map {{DEFAULT_MAP}} +gamemode {{GAMEMODE}}",
  "config": {
    "files": {},
    "startup": {
      "done": "VAC secure mode"
    },
    "stop": "quit"
  },
  "scripts": {
    "install": {
      "container": "cm2network/steamcmd:root",
      "entrypoint": "/bin/bash",
      "script": "#!/bin/bash\ncd /mnt/server\n/home/steam/steamcmd/steamcmd.sh +force_install_dir /mnt/server +login anonymous +app_update 4020 validate +quit"
    }
  },
  "variables": [
    {
      "name": "Server Port",
      "description": "Server port",
      "env_variable": "SERVER_PORT",
      "default_value": "27015",
      "user_viewable": true,
      "user_editable": false,
      "rules": "required|integer|between:1024,65535"
    },
    {
      "name": "Max Players",
      "description": "Maximum players",
      "env_variable": "MAX_PLAYERS",
      "default_value": "24",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|integer|between:2,128"
    },
    {
      "name": "Default Map",
      "description": "Starting map",
      "env_variable": "DEFAULT_MAP",
      "default_value": "gm_flatgrass",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:50"
    },
    {
      "name": "Gamemode",
      "description": "Default gamemode",
      "env_variable": "GAMEMODE",
      "default_value": "sandbox",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:30"
    }
  ]
}
